<!-- Fixed item-form.html template -->
<form>
  <div class="form-group">
    <label for="name">Item Name</label>
    <input type="text" name="name" id="name" value="{{item.name}}" required>
  </div>
  
  <div class="form-group">
    <label for="owner">Owner</label>
    <input type="text" name="owner" id="owner" value="{{item.owner}}" required>
  </div>
  
  <div class="form-group">
    <label for="quantity">Quantity</label>
    <input type="number" name="quantity" id="quantity" value="{{#if item.quantity}}{{item.quantity}}{{else}}1{{/if}}" min="1">
  </div>
  
  <div class="form-group">
    <label for="source">Source</label>
    <input type="text" name="source" id="source" value="{{item.source}}" required>
  </div>
  
  <div class="form-group">
    <label for="item_type_id">Item Type</label>
    <select name="item_type_id" id="item_type_id">
      <option value="">-- Select Type --</option>
      {{#each itemTypes}}
      <option value="{{this.id}}" {{#if (eq ../item.itemType this.name)}}selected{{/if}}>{{this.name}}</option>
      {{/each}}
    </select>
  </div>
  
  <div class="form-group">
    <label for="item_rarity_id">Rarity</label>
    <select name="item_rarity_id" id="item_rarity_id">
      <option value="">-- Select Rarity --</option>
      {{#each itemRarities}}
      <option value="{{this.id}}" {{#if (eq ../item.rarity this.name)}}selected{{/if}} style="color:{{this.colorCode}}">{{this.name}}</option>
      {{/each}}
    </select>
  </div>
  
  <div class="form-group">
    <label for="value">Value</label>
    <div class="input-group">
      <input type="number" name="value" id="value" value="{{item.value}}" min="0">
      <select name="value_type_id" id="value_type_id">
        <option value="2" {{#if (eq item.valueType "gp")}}selected{{/if}}>Gold</option>
        <option value="3" {{#if (eq item.valueType "sp")}}selected{{/if}}>Silver</option>
        <option value="4" {{#if (eq item.valueType "cp")}}selected{{/if}}>Copper</option>
        <option value="1" {{#if (eq item.valueType "pp")}}selected{{/if}}>Platinum</option>
      </select>
    </div>
  </div>
  
  <!-- Fixed tags field with validation and proper type -->
  <div class="form-group">
    <label for="tags">Tags (comma separated)</label>
    <input type="text" name="tags" id="tags" value="{{item.tags}}" placeholder="e.g. weapon, magic, quest item">
    <small class="form-text text-muted">Separate tags with commas</small>
  </div>
  
  <div class="form-group">
    <label for="description">Description</label>
    <textarea name="description" id="description" rows="4">{{item.description}}</textarea>
  </div>
</form>